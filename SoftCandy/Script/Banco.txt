CREATE DATABASE `softcandy`;

USE `softcandy`;

CREATE TABLE `categoria` (
  `IdCategoria` int NOT NULL AUTO_INCREMENT,
  `Nome_Categoria` varchar(60) NOT NULL,
  PRIMARY KEY (`IdCategoria`)
);

CREATE TABLE `cliente` (
  `IdCliente` int NOT NULL AUTO_INCREMENT,
  `Nome` varchar(60) NOT NULL,
  `Celular` varchar(11) NOT NULL,
  `Endereco` varchar(254) NOT NULL,
  PRIMARY KEY (`IdCliente`)
);

CREATE TABLE `item_pedido` (
  `Id` int NOT NULL AUTO_INCREMENT,
  `PrecoPago` decimal(65,30) NOT NULL,
  `QuantidadeProduto` int NOT NULL,
  `IdProduto` int NOT NULL,
  `IdPedido` int NOT NULL,
  PRIMARY KEY (`Id`),
  KEY `IX_Item_Pedido_IdProduto` (`IdProduto`),
  KEY `IX_Item_Pedido_IdPedido` (`IdPedido`),
  CONSTRAINT `FK_Item_Pedido_Pedido_IdPedido` FOREIGN KEY (`IdPedido`) REFERENCES `pedido` (`IdPedido`) ON DELETE CASCADE,
  CONSTRAINT `FK_Item_Pedido_Produto_IdProduto` FOREIGN KEY (`IdProduto`) REFERENCES `produto` (`IdProduto`) ON DELETE CASCADE
);

CREATE TABLE `pedido` (
  `IdPedido` int NOT NULL AUTO_INCREMENT,
  `ValorTotalPedido` decimal(65,30) NOT NULL,
  `Data_Pedido` datetime(6) NOT NULL,
  `IdCliente` int NOT NULL,
  PRIMARY KEY (`IdPedido`),
  KEY `IX_Pedido_IdCliente` (`IdCliente`),
  CONSTRAINT `FK_Pedido_Cliente_IdCliente` FOREIGN KEY (`IdCliente`) REFERENCES `cliente` (`IdCliente`) ON DELETE CASCADE
);

CREATE TABLE `produto` (
  `IdProduto` int NOT NULL AUTO_INCREMENT,
  `NomeProduto` varchar(60) NOT NULL,
  `QuantidadeProduto` int NOT NULL,
  `PrecoVendaProduto` decimal(65,30) NOT NULL,
  `DescricaoProduto` varchar(60) DEFAULT NULL,
  `IdCategoria` int NOT NULL,
  PRIMARY KEY (`IdProduto`),
  KEY `IX_Produto_IdCategoria` (`IdCategoria`),
  CONSTRAINT `FK_Produto_Categoria_IdCategoria` FOREIGN KEY (`IdCategoria`) REFERENCES `categoria` (`IdCategoria`) ON DELETE CASCADE
);

CREATE TABLE `vendedor` (
  `IdVendedor` int NOT NULL AUTO_INCREMENT,
  `NomeVendedor` longtext,
  `CelularVendedor` longtext,
  `EnderecoVendedor` longtext,
  `EmailVendedor` longtext,
  `SenhaVendedor` longtext,
  PRIMARY KEY (`IdVendedor`)
);

// Conexão com o banco no arquivo appsettings.json